<!DOCTYPE html>
<html lang="en-us">

<head>
<meta charset="utf-8" />
<meta name="author" content="" />
<meta name="description" content="" />
<meta name="keywords" content="" />
<meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">

<link rel="canonical" href="https://marsettler.com/mongodb/mongodb-study-week-11/">
<meta property="og:title" content="MongoDB 스터디 11주차(데이터 모델링)" />
<meta property="og:description" content="고려사항  데이터 모델은 애플리케이션과 함께 변함 데이터 모델에 영향을 미치는 요소  사용자의 요구사항 읽기 및 쓰기 작업의 특성    모델링 순서  애플리케이션 워크로드 측정  데이터 사이즈 중요도에 따라 작업을 목록화   데이터와 데이터 간의 관계를 연결(CRD, Collection Relationship Diagram)  레퍼런스할지 임베드 할지 결정   각 컬렉션의 데이터 모델을 정리(디자인 패턴 적용)  임베딩 vs 레퍼런스 1. 임베딩 User ={&#34;_id&#34;: 1,&#34;name&#34;: &#34;hueypark&#34;,&#34;items&#34;:[{&#34;type&#34;: &#34;sword&#34;,&#34;damage&#34;: 10},{&#34;type&#34;: &#34;spear&#34;,&#34;damage&#34;: 20}]}2." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://marsettler.com/mongodb/mongodb-study-week-11/" />
<meta property="article:published_time" content="2021-04-07T00:00:00+00:00" />
<meta property="article:modified_time" content="2021-04-08T22:17:15+09:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="MongoDB 스터디 11주차(데이터 모델링)"/>
<meta name="twitter:description" content="고려사항  데이터 모델은 애플리케이션과 함께 변함 데이터 모델에 영향을 미치는 요소  사용자의 요구사항 읽기 및 쓰기 작업의 특성    모델링 순서  애플리케이션 워크로드 측정  데이터 사이즈 중요도에 따라 작업을 목록화   데이터와 데이터 간의 관계를 연결(CRD, Collection Relationship Diagram)  레퍼런스할지 임베드 할지 결정   각 컬렉션의 데이터 모델을 정리(디자인 패턴 적용)  임베딩 vs 레퍼런스 1. 임베딩 User ={&#34;_id&#34;: 1,&#34;name&#34;: &#34;hueypark&#34;,&#34;items&#34;:[{&#34;type&#34;: &#34;sword&#34;,&#34;damage&#34;: 10},{&#34;type&#34;: &#34;spear&#34;,&#34;damage&#34;: 20}]}2."/>

<meta itemprop="name" content="MongoDB 스터디 11주차(데이터 모델링)">
<meta itemprop="description" content="고려사항  데이터 모델은 애플리케이션과 함께 변함 데이터 모델에 영향을 미치는 요소  사용자의 요구사항 읽기 및 쓰기 작업의 특성    모델링 순서  애플리케이션 워크로드 측정  데이터 사이즈 중요도에 따라 작업을 목록화   데이터와 데이터 간의 관계를 연결(CRD, Collection Relationship Diagram)  레퍼런스할지 임베드 할지 결정   각 컬렉션의 데이터 모델을 정리(디자인 패턴 적용)  임베딩 vs 레퍼런스 1. 임베딩 User ={&#34;_id&#34;: 1,&#34;name&#34;: &#34;hueypark&#34;,&#34;items&#34;:[{&#34;type&#34;: &#34;sword&#34;,&#34;damage&#34;: 10},{&#34;type&#34;: &#34;spear&#34;,&#34;damage&#34;: 20}]}2.">
<meta itemprop="datePublished" content="2021-04-07T00:00:00&#43;00:00" />
<meta itemprop="dateModified" content="2021-04-08T22:17:15&#43;09:00" />
<meta itemprop="wordCount" content="276">



<meta itemprop="keywords" content="MongoDB," />

<link rel="stylesheet" href="/css/layout.css" />


<link rel="stylesheet" href="/css/default-dark.css" />


<link href="/font/d2coding.css" rel="stylesheet" type="text/css">

<title>


     MongoDB 스터디 11주차(데이터 모델링) 

</title>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9117575221392760"
     crossorigin="anonymous"></script>

<script>
(function(a_,i_,r_,_b,_r,_i,_d,_g,_e){if(!a_[_b]){var n=function(){var c=i_.createElement(r_);c.onerror=function(){g.queue.filter(function(a){return 0<=_d.indexOf(a[0])}).forEach(function(a){a=a[1];a=a[a.length-1];"function"===typeof a&&a("error occur when load airbridge")})};c.async=1;c.src=_r;"complete"===i_.readyState?i_.head.appendChild(c):a_.addEventListener("load",function h(){a_.removeEventListener("load",h);i_.head.appendChild(c)})},g={queue:[],get isSDKEnabled(){return!1}};_i.concat(_d).forEach(function(c){var a=c.split("."),h=a.pop();a.reduce(function(p,q){return p[q]=p[q]||{}},g)[h]=function(){g.queue.push([c,arguments])}});a_[_b]=g;0<_g?(_b=new (a_.XDomainRequest||a_.XMLHttpRequest),_i=function(){},_b.open("GET",_r),_b.timeout=_g,_b.onload=function(){n()},_b.onerror=_i,_b.onprogress=_i,_b.ontimeout=_i,_b.send()):n()}})(window,document,"script","airbridge","//static.airbridge.io/sdk/latest/airbridge.min.js","init startTracking stopTracking fetchResource openBanner setBanner setDownload setDownloads openDeeplink setDeeplinks sendWeb setUserAgent setMobileAppData setUserID clearUserID setUserEmail clearUserEmail setUserPhone clearUserPhone setUserAttribute removeUserAttribute clearUserAttributes setUserAlias removeUserAlias clearUserAlias clearUser setUserId setUserAttributes addUserAlias setDeviceAlias removeDeviceAlias clearDeviceAlias setDeviceIFV setDeviceIFA setDeviceGAID events.send events.signIn events.signUp events.signOut events.purchased events.addedToCart events.productDetailsViewEvent events.homeViewEvent events.productListViewEvent events.searchResultViewEvent".split(" "),["events.wait","createTouchpoint"],0);

airbridge.init({
    app: 'marsettler',
    webToken: 'fc5d8317920041d19c0f29af5eba27e8',
})
</script>

</head>


<body>
<div class="main">
<header>

<div class="header-bar">

  <nav>
    <div class="siteTitle">
      <a href="https://marsettler.com/">Marsettler</a>
    </div> 

    <a class="nav-item" href="/tags"><div class="nav-item-title">Tags</div></a>
    
    
    <a class="nav-item" href="/wiki/"><div class="nav-item-title">Wiki</div></a>
    
    <a class="nav-item" href="/about-me/"><div class="nav-item-title">About Me</div></a>
    

  </nav>

  
<div class="social-links-header">

  
  <a href="mailto:jaewan.huey.park@gmail.com"><div class="social-link">email</div></a>
  

  
  <a href="https://github.com/hueypark" target="_blank"><div class="social-link">gh</div></a>
  

  

  
  <a href="https://twitter.com/jaewanHueyPark" target="_blank"><div class="social-link">twtr</div></a>
  

  

</div>


</div>


</header>


<article class="post">
    <h1 class="title"> MongoDB 스터디 11주차(데이터 모델링) </h1>
    <div class="content"> <h1 id="heading">고려사항</h1>
<ul>
<li>데이터 모델은 애플리케이션과 함께 변함</li>
<li>데이터 모델에 영향을 미치는 요소
<ul>
<li>사용자의 요구사항</li>
<li>읽기 및 쓰기 작업의 특성</li>
</ul>
</li>
</ul>
<h1 id="-">모델링 순서</h1>
<ol>
<li>애플리케이션 워크로드 측정
<ul>
<li>데이터 사이즈</li>
<li>중요도에 따라 작업을 목록화</li>
</ul>
</li>
<li>데이터와 데이터 간의 관계를 연결(CRD, Collection Relationship Diagram)
<ul>
<li>레퍼런스할지 임베드 할지 결정</li>
</ul>
</li>
<li>각 컬렉션의 데이터 모델을 정리(디자인 패턴 적용)</li>
</ol>
<h1 id="-vs-">임베딩 vs 레퍼런스</h1>
<h2 id="1-">1. 임베딩</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#a6e22e">User</span> <span style="color:#f92672">=</span>
{
	<span style="color:#e6db74">&#34;_id&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">1</span>,
	<span style="color:#e6db74">&#34;name&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;hueypark&#34;</span>,
	<span style="color:#e6db74">&#34;items&#34;</span><span style="color:#f92672">:</span>
	[
		{
			<span style="color:#e6db74">&#34;type&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;sword&#34;</span>,
			<span style="color:#e6db74">&#34;damage&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">10</span>
		},
		{
			<span style="color:#e6db74">&#34;type&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;spear&#34;</span>,
			<span style="color:#e6db74">&#34;damage&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">20</span>
		}
	]
}
</code></pre></div><h2 id="2----">2. 레퍼런스(부모가 가진 배열로 연결)</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#a6e22e">User</span> <span style="color:#f92672">=</span>
{
	<span style="color:#e6db74">&#34;_id&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">1</span>,
	<span style="color:#e6db74">&#34;name&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;hueypark&#34;</span>,
	<span style="color:#e6db74">&#34;items&#34;</span><span style="color:#f92672">:</span> [<span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>]
}

<span style="color:#a6e22e">Item</span> <span style="color:#f92672">=</span>
{
	<span style="color:#e6db74">&#34;_id&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">2</span>,
	<span style="color:#e6db74">&#34;type&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;sword&#34;</span>,
	<span style="color:#e6db74">&#34;damage&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">10</span>
},
{
	<span style="color:#e6db74">&#34;_id&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">3</span>,
	<span style="color:#e6db74">&#34;type&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;spear&#34;</span>,
	<span style="color:#e6db74">&#34;damage&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">20</span>
}
</code></pre></div><h2 id="3----">3. 레퍼런스(자식이 가진 스칼라로 연결)</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#a6e22e">User</span> <span style="color:#f92672">=</span>
{
	<span style="color:#e6db74">&#34;_id&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">1</span>,
	<span style="color:#e6db74">&#34;name&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;hueypark&#34;</span>
}

<span style="color:#a6e22e">Item</span> <span style="color:#f92672">=</span>
{
	<span style="color:#e6db74">&#34;_id&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">2</span>,
	<span style="color:#e6db74">&#34;user_id&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">1</span>,
	<span style="color:#e6db74">&#34;type&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;sword&#34;</span>,
	<span style="color:#e6db74">&#34;damage&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">10</span>
},
{
	<span style="color:#e6db74">&#34;_id&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">3</span>,
	<span style="color:#e6db74">&#34;user_id&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">1</span>,
	<span style="color:#e6db74">&#34;type&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;spear&#34;</span>,
	<span style="color:#e6db74">&#34;damage&#34;</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">20</span>
}
</code></pre></div><h2 id="--">각 방법의 장단점</h2>
<ol>
<li>임베딩
<ul>
<li>장점
<ul>
<li>한 번의 조회로 필요한 데이터를 가져 올 수 있음</li>
<li>트랜잭션 도움 없이 아토믹한 데이터 변경이 가능함</li>
</ul>
</li>
<li>단점
<ul>
<li>단일 도큐먼트 크기 제한을 고려해야 함</li>
<li>자식을 기준으로 조회하기 어려움(예: 모든 sword 의 수는 몇 개인가?)</li>
</ul>
</li>
</ul>
</li>
<li>레퍼런스(부모가 가진 배열로 연결)
<ul>
<li>장점
<ul>
<li>단일 도큐먼트 크기 제한에서 상대적으로 자유로움</li>
</ul>
</li>
<li>단점
<ul>
<li>자식으로 부모를 조회할 수 없음</li>
<li>조회를 두 번 해야 함</li>
<li>아토믹한 데이터 변경을 위해 트랜잭션을 사용해야 함</li>
</ul>
</li>
</ul>
</li>
<li>레퍼런스(자식이 가진 스칼라로 연결)
<ul>
<li>장점
<ul>
<li>자식 기반의 조회가 용이함</li>
<li>단일 도큐먼트 크기 제한에서 상대적으로 자유로움</li>
</ul>
</li>
<li>단점
<ul>
<li>조회를 두 번 해야 함</li>
<li>아토믹한 데이터 변경을 위해 트랜잭션을 사용해야 함</li>
</ul>
</li>
</ul>
</li>
</ol>
<h2 id="-1">선택 전략</h2>
<ul>
<li>데이터의 특성에 따라 적절한 방법을 적용한다.</li>
<li>기본적으로 임베딩을 사용하고 필요시 레퍼런스로 전환한다.</li>
<li>기본적으로 레퍼런스를 사용하고 필요시 임베딩으로 전환한다.</li>
</ul>
<h1 id="heading1">참고자료</h1>
<ul>
<li>Data Modeling with MongoDB 프레젠테이션: <a href="https://www.mongodb.com/presentations/data-modeling-with-mongodb">https://www.mongodb.com/presentations/data-modeling-with-mongodb</a></li>
<li>공식문서 내 데이터 모델링: <a href="https://docs.mongodb.com/manual/core/data-modeling-introduction/">https://docs.mongodb.com/manual/core/data-modeling-introduction/</a></li>
<li><a href="/mongodb/mongodb-study-week-5/">MongoDB 스터디 5주차(패턴과 안티패턴)</a></li>
</ul>
 </div>
    <footer class="post-footer">
  <div class="post-footer-data">
    
<div class="tags">
  
    
      <div class="tag">
        <a href="/tags/mongodb">#MongoDB</a>
      </div>
    
  
</div>

    <div class="date">created: 2021-04-07 | updated: 2021-04-08</div>
    
  </div>
</footer>

<script src="https://utteranc.es/client.js"
        repo="hueypark/wiki"
        issue-term="pathname"
        theme="github-dark"
        crossorigin="anonymous"
        async>
</script>


</article>

  <footer>

  <div class="social-links-footer">

  
  <a href="mailto:jaewan.huey.park@gmail.com"><div class="social-link">Email</div></a>
  

  
  <a href="https://github.com/hueypark" target="_blank"><div class="social-link">GitHub</div></a>
  

  

  
  <a href="https://twitter.com/jaewanHueyPark" target="_blank"><div class="social-link">Twitter</div></a>
  

  

  

</div>

  <script type="text/javascript" async
  src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
  MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [['$','$'], ['\\(','\\)']],
    displayMath: [['$$','$$']],
    processEscapes: true,
    processEnvironments: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
    TeX: { equationNumbers: { autoNumber: "AMS" },
         extensions: ["AMSmath.js", "AMSsymbols.js"] }
  }
  });
  MathJax.Hub.Queue(function() {
    
    
    
    var all = MathJax.Hub.getAllJax(), i;
    for(i = 0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });

  MathJax.Hub.Config({
  
  TeX: { equationNumbers: { autoNumber: "AMS" } }
  });
</script>


  <div class="copyright">  </div>

  <div class="poweredby">
    Powered by <a href="https://gohugo.io/">Hugo</a>.
  </div>

  </footer>

</div> 

<script async src="/js/mermaid/mermaid.min.js"></script>

</body>
</html>

